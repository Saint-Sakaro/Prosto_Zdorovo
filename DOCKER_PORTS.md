# üîå –ü–æ—Ä—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker

## –ü–æ—Ä—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Docker, –ø—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Ä—Ç–∞—Ö:

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------------|-----------------|-----|----------|
| **Frontend** | 3000 | 80 | http://localhost:3000 | React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (nginx) |
| **Backend API** | 8000 | 8000 | http://localhost:8000 | Django REST API |
| **Admin Panel** | 8000 | 8000 | http://localhost:8000/admin | Django –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------------|-----------------|----------|
| **PostgreSQL** | 5432 | 5432 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **Redis** | 6379 | 6379 | –ö—ç—à –∏ –±—Ä–æ–∫–µ—Ä –¥–ª—è Celery |

---

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤

–ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã, –∏–∑–º–µ–Ω–∏—Ç–µ –∏—Ö –≤ `docker-compose.yml`:

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ Frontend

```yaml
frontend:
  ports:
    - "3001:80"  # –í–º–µ—Å—Ç–æ 3000:80
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:3001
- –û–±–Ω–æ–≤–∏—Ç–µ `CORS_ALLOWED_ORIGINS` –≤ `.env`:
  ```env
  CORS_ALLOWED_ORIGINS=http://localhost:3001,http://127.0.0.1:3001
  ```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ Backend

```yaml
backend:
  ports:
    - "8001:8000"  # –í–º–µ—Å—Ç–æ 8000:8000
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8001
- –û–±–Ω–æ–≤–∏—Ç–µ `REACT_APP_API_URL` –≤ `frontend/.env` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ PostgreSQL

```yaml
db:
  ports:
    - "5433:5432"  # –í–º–µ—Å—Ç–æ 5432:5432
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–∏—Ç–µ `DB_PORT` –≤ `.env`:
```env
DB_PORT=5433
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤

```bash
# Linux/Mac
lsof -i :8000
lsof -i :3000
lsof -i :5432

# Windows
netstat -ano | findstr :8000
netstat -ano | findstr :3000
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# Frontend
curl http://localhost:3000

# Backend
curl http://localhost:8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Docker
docker-compose ps
```

---

## –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –≤ Docker

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø—Ä–æ–±—Ä–æ—à–µ–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤

```bash
docker-compose ps
```

–ò–ª–∏ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

```bash
docker port health_map_backend
docker port health_map_frontend
```

---

## –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å Docker

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏ –∏ –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –ø–æ –∏–º–µ–Ω–∞–º —Å–µ—Ä–≤–∏—Å–æ–≤:

- Backend ‚Üí Database: `db:5432`
- Backend ‚Üí Redis: `redis:6379`
- Frontend ‚Üí Backend: `backend:8000` (—á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å)

### –í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø

–ü–æ—Ä—Ç—ã –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞:
- `localhost:3000` ‚Üí Frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- `localhost:8000` ‚Üí Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ—Ä—Ç–∞—Ö

–°–æ–∑–¥–∞–π—Ç–µ `docker-compose.override.yml`:

```yaml
version: '3.8'

services:
  frontend:
    ports:
      - "8080:80"
  
  backend:
    ports:
      - "9000:8000"
```

–ó–∞–ø—É—Å–∫:
```bash
docker-compose up -d
```

–¢–µ–ø–µ—Ä—å:
- Frontend: http://localhost:8080
- Backend: http://localhost:9000

---

## Troubleshooting

### –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–û—à–∏–±–∫–∞:** `Bind for 0.0.0.0:8000 failed: port is already allocated`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç:
   ```bash
   lsof -i :8000
   ```
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `docker-compose.yml`

### –ü–æ—Ä—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker-compose ps`
2. –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `docker-compose logs backend`
3. Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ –≤ `docker-compose.yml`

---

**–í—Å–µ –ø–æ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

