# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ S_infra —á–µ—Ä–µ–∑ Gigachat

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ (S_infra) - —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Gigachat –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è –º–µ—Å—Ç–∞.

## üîÑ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 1. –†–∞—Å—á–µ—Ç S_infra —á–µ—Ä–µ–∑ Gigachat

**–ë—ã–ª–æ:**
- S_infra —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∞—Å—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∞–Ω–∫–µ—Ç—ã (form_data)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤–µ—Å–∞ –ø–æ–ª–µ–π –∏–∑ FormSchema
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —Ç–∏–ø–∞–º –ø–æ–ª–µ–π

**–°—Ç–∞–ª–æ:**
- S_infra —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Gigachat –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è –º–µ—Å—Ç–∞
- –û–ø–∏—Å–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è LLM —Å —É—á–µ—Ç–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—ä–µ–∫—Ç–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –ø—Ä–æ–º–ø—Ç

### 2. –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Å—Ç–∞

**–ë—ã–ª–æ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–ª –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∞–Ω–∫–µ—Ç—É (form_data)
- –ö–∞–∂–¥–æ–µ –ø–æ–ª–µ —Ç—Ä–µ–±–æ–≤–∞–ª–æ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ

**–°—Ç–∞–ª–æ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ **–∫–∞—Ç–µ–≥–æ—Ä–∏—é**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç **–æ–ø–∏—Å–∞–Ω–∏–µ** –º–µ—Å—Ç–∞ (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)
- Gigachat –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç S_infra –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è
- –ê–¥—Ä–µ—Å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### 3. –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞

**–ë—ã–ª–æ:**
- –î–∞–Ω–Ω—ã–µ –∏–∑ Excel –Ω–∞–ø—Ä—è–º—É—é —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ form_data
- S_infra —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∞—Å—å –ø–æ –∞–Ω–∫–µ—Ç–µ (–µ—Å–ª–∏ –±—ã–ª–∞ —Å—Ö–µ–º–∞)

**–°—Ç–∞–ª–æ:**
- Gigachat –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel
- Gigachat —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç S_infra –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Excel –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ LLMService

#### `calculate_infra_score(description, category_name, additional_data)`

–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç S_infra –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ Gigachat.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `description` (str): –û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Å—Ç–∞
- `category_name` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `additional_data` (dict): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∞–¥—Ä–µ—Å, –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ç.–¥.)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
{
    's_infra': float,      # 0-100
    'confidence': float,   # 0-1
    'reasoning': str,      # –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
    'red_flags': list      # –ü–æ–¥–æ–∑—Ä–µ–Ω–∏—è –Ω–∞ –æ–±–º–∞–Ω
}
```

#### `generate_description_from_data(data, category_name)`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `data` (dict): –î–∞–Ω–Ω—ã–µ –∏–∑ Excel (–≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏)
- `category_name` (str): –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `str`: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π InfrastructureScoreCalculator

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Gigachat –≤–º–µ—Å—Ç–æ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ —Ñ–æ—Ä–º–µ:

```python
calculator = InfrastructureScoreCalculator()
s_infra = calculator.calculate_infra_score(poi)  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç poi.description
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```python
result = calculator.calculate_from_description(
    description="...",
    category_name="–ê–ø—Ç–µ–∫–∞",
    additional_data={...}
)
```

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã

–ü—Ä–æ–º–ø—Ç –¥–ª—è Gigachat –≤–∫–ª—é—á–∞–µ—Ç:
- ‚úÖ –ó–∞—â–∏—Ç—É –æ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –æ–ø–∏—Å–∞–Ω–∏–µ–º
- ‚úÖ –û–±—ä–µ–∫—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞
- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—é –ø–æ–ø—ã—Ç–æ–∫ –æ–±–º–∞–Ω–∞ (red_flags)
- ‚úÖ –£—á–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—ä–µ–∫—Ç–∞
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ (reasoning)

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. POISubmissionSerializer

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–±—Ä–∞–Ω–æ –ø–æ–ª–µ `form_data` (required=False)
- ‚úÖ –ü–æ–ª–µ `description` —Ç–µ–ø–µ—Ä—å **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ** (min_length=10, max_length=2000)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç S_infra —á–µ—Ä–µ–∑ Gigachat –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞",
  "address": "–ê–¥—Ä–µ—Å",
  "latitude": 55.7558,
  "longitude": 37.6173,
  "category_slug": "apteka",
  "description": "–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Å—Ç–∞..."
}
```

### 2. BulkUploadPOIView

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ Gigachat (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –≤ Excel)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç S_infra –¥–ª—è –∫–∞–∂–¥–æ–≥–æ POI
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ª–∏—Å—Ç–∞–º–∏ Excel (–∫–∞–∂–¥—ã–π –ª–∏—Å—Ç = –∫–∞—Ç–µ–≥–æ—Ä–∏—è)

### 3. –°–∏–≥–Ω–∞–ª—ã –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ü–µ—Ä–µ—Å—á–µ—Ç S_infra –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –ü–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è POIRating)

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Å—Ç–∞

```python
# POST /api/maps/pois/submissions/
{
  "name": "–ê–ø—Ç–µ–∫–∞ ‚Ññ1",
  "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1",
  "latitude": 55.7558,
  "longitude": 37.6173,
  "category_slug": "apteka",
  "description": "–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –∞–ø—Ç–µ–∫–∞ —Å —à–∏—Ä–æ–∫–∏–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º –ª–µ–∫–∞—Ä—Å—Ç–≤ –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤. –û–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç–∞."
}
```

Gigachat –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –ø—Ä–∏—Å–≤–æ–∏—Ç S_infra –æ—Ç 0 –¥–æ 100.

### –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Excel —Ñ–∞–π–ª–∞:
1. Gigachat –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∏
2. Gigachat —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç S_infra –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è
3. POI —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ —Ä–∞—Å—á–µ—Ç–∞

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–±–º–∞–Ω–∞

–ü—Ä–æ–º–ø—Ç –¥–ª—è Gigachat –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞:
1. **–û–±—ä–µ–∫—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ, –∞ –Ω–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏
2. **–î–µ—Ç–µ–∫—Ü–∏—é –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π** - –≤—ã—è–≤–ª—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –æ–±–º–∞–Ω–∞ –∏ —Å–Ω–∏–∂–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥
3. **–ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏** - –æ—Ç–º–µ—á–∞–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
4. **–ù–∏–∑–∫–∏–π confidence** - –ø—Ä–∏ —Ä–∞—Å–ø–ª—ã–≤—á–∞—Ç—ã—Ö –∏–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏—è—Ö

## üìù –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–∞—Å—á–µ—Ç–∞

–í `poi.metadata` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
```json
{
  "s_infra_calculation": {
    "s_infra": 75.5,
    "confidence": 0.85,
    "reasoning": "–û–±—ä–µ–∫—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ...",
    "red_flags": [],
    "calculated_by": "gigachat"
  },
  "description_generated": true
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Gigachat**: –ï—Å–ª–∏ Gigachat –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (50.0)

2. **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: –†–∞—Å—á–µ—Ç —á–µ—Ä–µ–∑ LLM –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –ø—Ä—è–º–æ–π —Ä–∞—Å—á–µ—Ç

3. **–°—Ç–æ–∏–º–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ Gigachat —Å—Ç–æ–∏—Ç —Ç–æ–∫–µ–Ω—ã (–Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã API)

4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—Ç–∞—Ä—ã–µ POI —Å form_data –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –¥–ª—è –Ω–∏—Ö S_infra –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–ø–∏—Å–∞–Ω–∏–µ

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö POI:
- –ï—Å–ª–∏ –µ—Å—Ç—å description - S_infra –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Gigachat
- –ï—Å–ª–∏ –Ω–µ—Ç description, –Ω–æ –µ—Å—Ç—å form_data - –±—É–¥–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑ form_data
- –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ —Ç–æ–≥–æ, –Ω–∏ –¥—Ä—É–≥–æ–≥–æ - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (50.0)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–î–∞—Ç–∞:** 2025-01-XX
