# –û—Ç—á–µ—Ç –æ —Å–±—Ä–æ—Å–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ API

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –£–¥–∞–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π (–∫—Ä–æ–º–µ `__init__.py`):
  - `gamification/migrations/0001_initial.py`
  - `maps/migrations/0001_initial.py`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (`db.sqlite3`)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SQLite
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω `default=False` –Ω–∞ `default=True` –≤ `health_map/settings.py` –¥–ª—è `USE_SQLITE`
- –¢–µ–ø–µ—Ä—å SQLite –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è)

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ `python3 manage.py makemigrations`:
  - –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `maps`: `maps/migrations/0001_initial.py`
  - –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è `gamification`: `gamification/migrations/0001_initial.py`

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ `python3 manage.py migrate`
- –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
  - Django —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (admin, auth, contenttypes, sessions)
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `maps`
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `gamification`

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Django
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ `python3 manage.py check` - –æ—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã API

### 1. –ê–ª–∏–∞—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞–ª–∏–∞—Å `/api/maps/pois/submit/` ‚Üí `/api/maps/pois/submissions/`
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:
  - `POST /api/maps/pois/submit/` (–Ω–æ–≤—ã–π –∞–ª–∏–∞—Å)
  - `POST /api/maps/pois/submissions/` (–æ—Å–Ω–æ–≤–Ω–æ–π)

### 2. –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Å—Ö–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω action `schema()` –≤ `POICategoryViewSet`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GET –∏ PUT –º–µ—Ç–æ–¥—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å—Ö–µ–º—É –ø—Ä–∏ PUT, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: GET - –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ, PUT - —Ç–æ–ª—å–∫–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

### 1. –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ö–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç:**
- `GET /api/maps/categories/{categorySlug}/schema/`
- `PUT /api/maps/categories/{categorySlug}/schema/`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω custom action `schema()` –≤ `POICategoryViewSet`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω GET –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ö–µ–º—ã –∞–Ω–∫–µ—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω PUT –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Å—Ö–µ–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `frontend/src/api/places.ts:74` - `getCategorySchema()`
- `frontend/src/api/places.ts:181` - `updateCategorySchema()`
- `frontend/src/components/places/CreatePlaceForm.tsx:254`
- `frontend/src/pages/CategoriesManagementPage.tsx:256, 291, 304`

## ‚ö†Ô∏è –û—Å—Ç–∞–≤—à–∏–µ—Å—è –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

### 2. –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç:**
- `POST /api/maps/pois/bulk-upload/`

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –±—ç–∫–µ–Ω–¥–µ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π view –¥–ª—è bulk upload, –∫–æ—Ç–æ—Ä—ã–π:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç Excel —Ñ–∞–π–ª —á–µ—Ä–µ–∑ FormData
- –ü–∞—Ä—Å–∏—Ç —Ñ–∞–π–ª –∏ —Å–æ–∑–¥–∞–µ—Ç POI –∏–∑ –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Å–æ–∑–¥–∞–Ω–æ, –æ—à–∏–±–∫–∏, –∏ —Ç.–¥.)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ `import_categories_from_excel` –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –Ω–æ –Ω–µ—Ç API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ POI. –≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–∑–∂–µ.

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `frontend/src/api/places.ts:158` - `bulkUploadPlaces()`
- `frontend/src/pages/BulkUploadPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### Maps API
- ‚úÖ `GET /api/maps/categories/` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ `GET /api/maps/categories/{slug}/` - –¥–µ—Ç–∞–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `GET /api/maps/categories/{slug}/schema/` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ö–µ–º—É –∞–Ω–∫–µ—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `PUT /api/maps/categories/{slug}/schema/` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –∞–Ω–∫–µ—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `POST /api/maps/pois/submissions/` - —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É (—Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∞–ª–∏–∞—Å `/pois/submit/`)
- ‚úÖ `GET /api/maps/pois/submissions/` - —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `GET /api/maps/pois/submissions/{uuid}/` - –¥–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏
- ‚úÖ `GET /api/maps/pois/submissions/pending/` - –∑–∞—è–≤–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
- ‚úÖ `POST /api/maps/pois/submissions/{uuid}/moderate/` - –º–æ–¥–µ—Ä–∞—Ü–∏—è
- ‚úÖ `POST /api/maps/geocode/` - –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `POST /api/maps/reverse-geocode/` - –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ö†Ô∏è `POST /api/maps/pois/bulk-upload/` - –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

### Auth API
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç:
- ‚úÖ `POST /api/auth/register/`
- ‚úÖ `POST /api/auth/login/`
- ‚úÖ `POST /api/auth/token/refresh/`
- ‚úÖ `GET /api/auth/profile/`
- ‚úÖ `PUT /api/auth/profile/`
- ‚úÖ `POST /api/auth/change-password/`
- ‚úÖ `GET /api/auth/me/`

### Gamification API
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤ –∫–æ–¥–µ).

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Å—Ö–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - **–í–´–ü–û–õ–ù–ï–ù–û**
   
2. **–î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏** (`/pois/bulk-upload/`)
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º–∏, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ)
   - –¢—Ä–µ–±—É–µ—Ç: –æ–±—Ä–∞–±–æ—Ç–∫—É Excel —Ñ–∞–π–ª–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö, –ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ POI

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Å—Ç–∞** —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ `/pois/submit/`

## üéØ –ò—Ç–æ–≥

- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω—ã
- ‚úÖ –ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ SQLite –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞–ª–∏–∞—Å –¥–ª—è `/pois/submit/`
- ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã 2 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (—Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç–µ, –Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å—Ö–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.
