# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. GeocoderService ‚úÖ
–°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `maps/services/geocoder_service.py` —Å –º–µ—Ç–æ–¥–∞–º–∏:

- ‚úÖ `geocode_address(address)` - –ø—Ä—è–º–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∞–¥—Ä–µ—Å ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
- ‚úÖ `reverse_geocode(latitude, longitude)` - –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí –∞–¥—Ä–µ—Å)
- ‚úÖ `geocode_poi(poi)` - –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ POI –æ–±—ä–µ–∫—Ç–∞
- ‚úÖ `get_area_name(latitude, longitude, analysis_type)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∞–¥—Ä–µ—Å–∞ (—Å—Ç—Ä–∞–Ω–∞, –≥–æ—Ä–æ–¥, —Ä–∞–π–æ–Ω, —É–ª–∏—Ü–∞, –¥–æ–º)
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AreaAnalysisService ‚úÖ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –æ–±–ª–∞—Å—Ç–µ–π –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ (radius, city, street)
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. –ú–∞—Å—Å–æ–≤–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ ‚úÖ
- ‚úÖ –î–µ–π—Å—Ç–≤–∏–µ `geocode_addresses` –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è POI
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –Ω–µ–≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

### 4. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã ‚úÖ
- ‚úÖ `POST /api/maps/geocode/` - –ø—Ä—è–º–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `POST /api/maps/reverse-geocode/` - –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (IsAuthenticated)

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚úÖ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `YANDEX_GEOCODER_API_KEY` –≤ `settings.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤ `env.example`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `requests>=2.31.0` –≤ `requirements.txt`

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞

1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –Ω–∞ [–Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä](https://yandex.ru/dev/geocoder/)
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:
   ```
   YANDEX_GEOCODER_API_KEY=your-api-key-here
   ```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```python
from maps.services.geocoder_service import GeocoderService

geocoder = GeocoderService()

# –ü—Ä—è–º–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
result = geocoder.geocode_address("–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, 1")
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {
#     'latitude': 55.7558,
#     'longitude': 37.6173,
#     'formatted_address': '...',
#     'country': '–†–æ—Å—Å–∏—è',
#     'city': '–ú–æ—Å–∫–≤–∞',
#     'street': '–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å',
#     'house': '1'
# }

# –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
result = geocoder.reverse_geocode(55.7558, 37.6173)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {
#     'formatted_address': '...',
#     'country': '–†–æ—Å—Å–∏—è',
#     'city': '–ú–æ—Å–∫–≤–∞',
#     'district': '...',
#     'street': '...',
#     'house': '...',
#     'short_name': '–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å'
# }
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API

#### –ü—Ä—è–º–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
POST /api/maps/geocode/
Authorization: Bearer <token>
Content-Type: application/json

{
    "address": "–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, 1"
}
```

#### –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
POST /api/maps/reverse-geocode/
Authorization: Bearer <token>
Content-Type: application/json

{
    "latitude": 55.7558,
    "longitude": 37.6173
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–ø–∏—Å–æ–∫ POI –≤ –∞–¥–º–∏–Ω–∫–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å
3. –í –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –¥–µ–π—Å—Ç–≤–∏–π –≤—ã–±–µ—Ä–∏—Ç–µ "–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤"
4. –ù–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å"

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- API –∫–ª—é—á –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ë–µ–∑ –∫–ª—é—á–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–µ—Ä–Ω—É—Ç `None` –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ Django logger
- –ó–∞–ø—Ä–æ—Å—ã –∫ API –∏–º–µ—é—Ç —Ç–∞–π–º–∞—É—Ç 10 —Å–µ–∫—É–Ω–¥

## üîó –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å Geocoder API

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://yandex.ru/dev/geocoder/doc/ru/)
- [–ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞](https://yandex.ru/dev/id/doc/ru/)

