# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å GigaChat

## –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞: "credentials doesn't match db data" (401)

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ GigaChat Studio

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://developers.sber.ru/studio
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API"**
4. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á"** –∏–ª–∏ **"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á"**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≥–æ—Ç–æ–≤—ã–π Base64 –∫–ª—é—á** (—Ñ–æ—Ä–º–∞—Ç: `MDE5YTg2Y2It...`)

### 2. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `.env`

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –Ω–∞ –Ω–æ–≤—ã–µ:

```env
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π Base64 –∫–ª—é—á –Ω–∞–ø—Ä—è–º—É—é
GIGACHAT_API_KEY=–≤–∞—à_–Ω–æ–≤—ã–π_base64_–∫–ª—é—á_–∏–∑_–ª–∏—á–Ω–æ–≥–æ_–∫–∞–±–∏–Ω–µ—Ç–∞

# –ò–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CLIENT_ID –∏ CLIENT_SECRET
GIGACHAT_CLIENT_ID=–≤–∞—à_client_id_uuid
GIGACHAT_CLIENT_SECRET=–≤–∞—à_client_secret_base64_–∫–ª—é—á

# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GIGACHAT_SCOPE=GIGACHAT_API_PERS
GIGACHAT_MODEL=GigaChat
GIGACHAT_VERIFY_SSL=False  # –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Django —Å–µ—Ä–≤–µ—Ä

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
python manage.py runserver
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:

```bash
python manage.py shell
```

```python
from maps.services.llm_service import LLMService

service = LLMService()
if service.credentials:
    print(f"‚úÖ Credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã: {len(service.credentials)} —Å–∏–º–≤–æ–ª–æ–≤")
    response = service._call_gigachat("–ü—Ä–∏–≤–µ—Ç! –û—Ç–≤–µ—Ç—å –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º: —Ä–∞–±–æ—Ç–∞–µ—Ç?")
    if response:
        print(f"‚úÖ GigaChat –æ—Ç–≤–µ—á–∞–µ—Ç: {response}")
    else:
        print("‚ùå GigaChat –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª")
else:
    print("‚ùå Credentials –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã")
```

## –§–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π

### –ì–æ—Ç–æ–≤—ã–π Base64 –∫–ª—é—á (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –§–æ—Ä–º–∞—Ç: `Base64(UUID1:UUID2)`
- –î–ª–∏–Ω–∞: ~100 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–∏–º–µ—Ä: `MDE5YTg2Y2ItNTg0YS03YmJkLTg1MjctZDZmNGI0MDBiZmU3OmFjMDI1NTA0LTVhOTAtNGUyOS1hNmVjLTEwMmE0ZDYyYjQxMQ==`

### CLIENT_ID –∏ CLIENT_SECRET
- CLIENT_ID: UUID —Ñ–æ—Ä–º–∞—Ç (36 —Å–∏–º–≤–æ–ª–æ–≤)
- CLIENT_SECRET: Base64 –∫–ª—é—á –∏–ª–∏ UUID
- –ü—Ä–∏–º–µ—Ä: 
  - CLIENT_ID: `019a86cb-584a-7bbd-8527-d6f4b400bfe7`
  - CLIENT_SECRET: `MDE5YTg2Y2It...` (Base64)

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ö–ª—é—á–∏ –º–æ–≥—É—Ç –∏—Å—Ç–µ–∫–∞—Ç—å** - –µ—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ 401 –æ—à–∏–±–∫—É, –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á
2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GIGACHAT_VERIFY_SSL=False –≤ production** - —ç—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ!
3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é** - –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
4. **–î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GIGACHAT_SCOPE=GIGACHAT_API_PERS**

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á –∞–∫—Ç—É–∞–ª–µ–Ω –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π scope (GIGACHAT_API_PERS –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–µ
