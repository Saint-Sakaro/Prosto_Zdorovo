# ‚úÖ –í–°–ï –≠–¢–ê–ü–´ –ó–ê–í–ï–†–®–ï–ù–´!

## üéâ –°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç –∏ —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê

---

## üìã –°–≤–æ–¥–∫–∞ –ø–æ —ç—Ç–∞–ø–∞–º

### ‚úÖ –≠–¢–ê–ü 1: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö - –ó–ê–í–ï–†–®–ï–ù
- –ú–æ–¥–µ–ª—å `FormSchema` —Å–æ–∑–¥–∞–Ω–∞
- –ú–æ–¥–µ–ª—å `POI` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (form_data, verified)
- –ú–æ–¥–µ–ª—å `Review` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (rating, poi, sentiment_score, extracted_facts)
- –ú–æ–¥–µ–ª—å `POIRating` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (S_infra, S_social, S_HIS)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

**–§–∞–π–ª—ã:**
- `maps/models.py` - –º–æ–¥–µ–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- `gamification/models.py` - Review –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

---

### ‚úÖ –≠–¢–ê–ü 2: –°–µ—Ä–≤–∏—Å—ã —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ - –ó–ê–í–ï–†–®–ï–ù
- `InfrastructureScoreCalculator` - —Ä–∞—Å—á–µ—Ç S_infra
- `SocialScoreCalculator` - —Ä–∞—Å—á–µ—Ç S_social —Å time decay
- `HealthImpactScoreCalculator` - –∏—Ç–æ–≥–æ–≤—ã–π HIS

**–§–æ—Ä–º—É–ª—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- S_infra: –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∞–Ω–∫–µ—Ç—ã
- S_social: –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ –ø–æ –æ—Ç–∑—ã–≤–∞–º —Å time decay –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π –∞–≤—Ç–æ—Ä–æ–≤
- S_HIS: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –±–æ–Ω—É—Å–æ–º –∑–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é

**–§–∞–π–ª—ã:**
- `maps/services/infrastructure_score_calculator.py`
- `maps/services/social_score_calculator.py`
- `maps/services/health_impact_score_calculator.py`

---

### ‚úÖ –≠–¢–ê–ü 3: LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (GIGACHAT) - –ó–ê–í–ï–†–®–ï–ù
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth 2.0
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ö–µ–º –∞–Ω–∫–µ—Ç —á–µ—Ä–µ–∑ LLM
- –ê–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–æ–≤ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–µ–Ω—Ç–∏–º–µ–Ω—Ç–∞ –∏ –æ—Ü–µ–Ω–∫–∏

**–ú–µ—Ç–æ–¥—ã:**
- `generate_schema()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JSON-—Å—Ö–µ–º—ã
- `analyze_review()` - –∞–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–∞
- `check_sentiment_consistency()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–Ω—Ç–∏–º–µ–Ω—Ç–∞

**–§–∞–π–ª—ã:**
- `maps/services/llm_service.py`

---

### ‚úÖ –≠–¢–ê–ü 4: API –∏ —Å–∏–≥–Ω–∞–ª—ã - –ó–ê–í–ï–†–®–ï–ù
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–∞–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LLM –≤ –ø—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–∑—ã–≤–æ–≤

**–°–∏–≥–Ω–∞–ª—ã:**
- –ü–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ POI
- –ü–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞
- –ê–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–æ–≤ —á–µ—Ä–µ–∑ LLM

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–∞–º–∏ –∞–Ω–∫–µ—Ç (CRUD)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ö–µ–º —á–µ—Ä–µ–∑ LLM
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç—ã –æ–±—ä–µ–∫—Ç–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

**–§–∞–π–ª—ã:**
- `maps/signals_ratings.py`
- `maps/views_ratings.py`
- `maps/serializers_ratings.py`
- `maps/urls_ratings.py`

---

### ‚úÖ –≠–¢–ê–ü 5: –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ - –ó–ê–í–ï–†–®–ï–ù
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç time decay
- –ü–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç –≤—Å–µ—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ batch processing

**–ó–∞–¥–∞—á–∏:**
- `recalculate_time_decay` - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 4:00
- `recalculate_category_ratings` - –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- `recalculate_all_ratings` - –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ Celery Beat
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏

**–§–∞–π–ª—ã:**
- `maps/tasks_ratings.py`
- `health_map/celery.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∞–Ω–∫–µ—Ç—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º –∞–Ω–∫–µ—Ç –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ LLM
- ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- ‚úÖ S_infra - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π)
- ‚úÖ S_social - —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π)
- ‚úÖ S_HIS - –∏—Ç–æ–≥–æ–≤—ã–π Health Impact Score
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç time decay

### LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ö–µ–º –∞–Ω–∫–µ—Ç
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–Ω—Ç–∏–º–µ–Ω—Ç–∞

### API –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- ‚úÖ REST API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã
- ‚úÖ –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
maps/
‚îú‚îÄ‚îÄ models.py                    # –ú–æ–¥–µ–ª–∏ (FormSchema, POI, POIRating)
‚îú‚îÄ‚îÄ signals_ratings.py          # –°–∏–≥–Ω–∞–ª—ã –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞
‚îú‚îÄ‚îÄ views_ratings.py            # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îú‚îÄ‚îÄ serializers_ratings.py      # Serializers
‚îú‚îÄ‚îÄ urls_ratings.py             # URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ tasks_ratings.py            # Celery –∑–∞–¥–∞—á–∏
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ infrastructure_score_calculator.py
    ‚îú‚îÄ‚îÄ social_score_calculator.py
    ‚îú‚îÄ‚îÄ health_impact_score_calculator.py
    ‚îî‚îÄ‚îÄ llm_service.py          # GIGACHAT –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

gamification/
‚îî‚îÄ‚îÄ models.py                   # Review –æ–±–Ω–æ–≤–ª–µ–Ω–∞

health_map/
‚îî‚îÄ‚îÄ celery.py                   # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á
```

---

## üéØ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!

1. ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
2. ‚úÖ –°–µ—Ä–≤–∏—Å—ã —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
4. ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã
5. ‚úÖ –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è API
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Celery –∑–∞–¥–∞—á
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
5. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
1. API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/OpenAPI)
2. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
3. –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-12-06  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –≠–¢–ê–ü–´ –ó–ê–í–ï–†–®–ï–ù–´  
**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄüéâ

