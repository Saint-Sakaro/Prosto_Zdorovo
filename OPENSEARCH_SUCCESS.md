# ‚úÖ OpenSearch —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

## üéâ –°—Ç–∞—Ç—É—Å

- ‚úÖ **OpenSearch –∑–∞–ø—É—â–µ–Ω**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 9200
- ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ**: Python –∫–ª–∏–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ **POI –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã**: 18 POI —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞**: –¢–æ—á–Ω—ã–µ –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∞–∫—Ç–∏–≤–Ω—ã

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
docker ps | grep opensearch
```

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö POI
```bash
curl -u admin:OpenSearch2024!@# http://localhost:9200/pois/_count
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Python
```python
from maps.services.opensearch_service import OpenSearchService
s = OpenSearchService()
print(f'OpenSearch enabled: {s.enabled}')  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å True
```

## üîë –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- **Host**: `localhost`
- **Port**: `9200`
- **Username**: `admin`
- **Password**: `OpenSearch2024!@#`

–≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `env.example`.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç OpenSearch –¥–ª—è —Ç–æ—á–Ω—ã—Ö –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

- `POST /api/maps/analyze/` - –∞–Ω–∞–ª–∏–∑ –æ–±–ª–∞—Å—Ç–∏ (—Ç–æ—á–Ω—ã–π —Ä–∞–¥–∏—É—Å)
- `GET /api/maps/pois/in-bbox/` - POI –≤ bounding box

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å**: –¢–æ—á–Ω—ã–µ –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–º–µ—Å—Ç–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã—Ö
- ‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å**: –ó–∞–ø—Ä–æ—Å—ã –≤ 10-50 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–ù–æ–≤—ã–µ POI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏:
- –°–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ POI
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–∏ POI
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ POI
- –£–¥–∞–ª–µ–Ω–∏–∏ POI

## üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—Å–µ—Ö POI
```bash
cd /Users/fedorbelov/Documents/Prosto_Zdorovo
export USE_SQLITE=True
export OPENSEARCH_USERNAME=admin
export OPENSEARCH_PASSWORD=OpenSearch2024!@#
python3 manage.py reindex_pois
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenSearch
```bash
docker stop opensearch
```

### –ó–∞–ø—É—Å–∫ OpenSearch
```bash
docker start opensearch
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
docker logs opensearch
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å —Ç–æ—á–Ω—ã–º–∏ –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏.

