# –°—Ç–∞—Ç—É—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OpenSearch

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. ‚úÖ **Python –∫–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**: `opensearch-py` —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2. ‚úÖ **–ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ —Å–∏–≥–Ω–∞–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. ‚úÖ **Fallback —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Django ORM

## ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

Docker –Ω–∞—á–∞–ª –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ–±—Ä–∞–∑ OpenSearch. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

## üìã –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

–û–±—Ä–∞–∑ OpenSearch –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
```bash
docker ps | grep opensearch
```

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```bash
curl http://localhost:9200
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ –æ–±—Ä–∞–∑ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
docker start opensearch
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π:
```bash
docker run -d \
  --name opensearch \
  -p 9200:9200 \
  -p 9600:9600 \
  -e "discovery.type=single-node" \
  -e "plugins.security.disabled=true" \
  opensearchproject/opensearch:latest
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ OpenSearch (—Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º)

–°–∏—Å—Ç–µ–º–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ fallback —Ä–µ–∂–∏–º–µ —á–µ—Ä–µ–∑ Django ORM. 
–¢–æ—á–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç –Ω–∏–∂–µ, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞.

## –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ OpenSearch

1. –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ POI:
```bash
cd /Users/fedorbelov/Documents/Prosto_Zdorovo
export USE_SQLITE=True
python3 manage.py reindex_pois
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
```bash
curl http://localhost:9200/pois/_count
```

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ Python –∫–ª–∏–µ–Ω—Ç: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚è≥ OpenSearch —Å–µ—Ä–≤–µ—Ä: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è/–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: —Ä–∞–±–æ—Ç–∞–µ—Ç (fallback —Ä–µ–∂–∏–º)

